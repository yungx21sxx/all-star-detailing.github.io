import{A as E,i as V,k as S,F as h,a as j,f as a,a8 as O,h as M,l as q,T as L,s as _,v as w,a9 as U,y as X,w as H,r as G,X as J,W as K}from"./entry.faa117d4.js";function B(e){const r=E("useRender");r.render=e}const Q=V({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Y(e){return{dimensionStyles:S(()=>({height:h(e.height),maxHeight:h(e.maxHeight),maxWidth:h(e.maxWidth),minHeight:h(e.minHeight),minWidth:h(e.minWidth),width:h(e.width)}))}}function Z(e){return{aspectStyles:S(()=>{const r=Number(e.aspectRatio);return r?{paddingBottom:String(1/r*100)+"%"}:void 0})}}const p=j({name:"VResponsive",props:{aspectRatio:[String,Number],contentClass:String,...Q()},setup(e,r){let{slots:l}=r;const{aspectStyles:n}=Z(e),{dimensionStyles:v}=Y(e);return B(()=>{var i;return a("div",{class:"v-responsive",style:v.value},[a("div",{class:"v-responsive__sizer",style:n.value},null),(i=l.additional)==null?void 0:i.call(l),l.default&&a("div",{class:["v-responsive__content",e.contentClass]},[l.default()])])}),{}}});function ee(e,r){if(!O)return;const l=r.modifiers||{},n=r.value,{handler:v,options:i}=typeof n=="object"?n:{handler:n,options:{}},s=new IntersectionObserver(function(){var d;let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],u=arguments.length>1?arguments[1]:void 0;const c=(d=e._observe)==null?void 0:d[r.instance.$.uid];if(!c)return;const f=g.some(b=>b.isIntersecting);v&&(!l.quiet||c.init)&&(!l.once||f||c.init)&&v(f,g,u),f&&l.once?C(e,r):c.init=!0},i);e._observe=Object(e._observe),e._observe[r.instance.$.uid]={init:!1,observer:s},s.observe(e)}function C(e,r){var l;const n=(l=e._observe)==null?void 0:l[r.instance.$.uid];!n||(n.observer.unobserve(e),delete e._observe[r.instance.$.uid])}const te={mounted:ee,unmounted:C},ne=te,re=V({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),z=(e,r)=>{let{slots:l}=r;const{transition:n,...v}=e,{component:i=L,...s}=typeof n=="object"?n:{};return M(i,q(typeof n=="string"?{name:n}:s,v),l)},ie=j({name:"VImg",directives:{intersect:ne},props:{aspectRatio:[String,Number],alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,width:[String,Number],...re()},emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,r){let{emit:l,slots:n}=r;const v=_(""),i=_(),s=_(e.eager?"loading":"idle"),d=_(),g=_(),u=S(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),c=S(()=>u.value.aspect||d.value/g.value||0);w(()=>e.src,()=>{f(s.value!=="idle")}),w(c,(t,o)=>{!t&&o&&i.value&&y(i.value)}),U(()=>f());function f(t){if(!(e.eager&&t)&&!(O&&!t&&!e.eager)){if(s.value="loading",u.value.lazySrc){const o=new Image;o.src=u.value.lazySrc,y(o,null)}!u.value.src||X(()=>{var o,m;if(l("loadstart",((o=i.value)==null?void 0:o.currentSrc)||u.value.src),(m=i.value)!=null&&m.complete){if(i.value.naturalWidth||N(),s.value==="error")return;c.value||y(i.value,null),b()}else c.value||y(i.value),$()})}}function b(){var t;$(),s.value="loaded",l("load",((t=i.value)==null?void 0:t.currentSrc)||u.value.src)}function N(){var t;s.value="error",l("error",((t=i.value)==null?void 0:t.currentSrc)||u.value.src)}function $(){const t=i.value;t&&(v.value=t.currentSrc||t.src)}let R=-1;function y(t){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const m=()=>{clearTimeout(R);const{naturalHeight:T,naturalWidth:x}=t;T||x?(d.value=x,g.value=T):!t.complete&&s.value==="loading"&&o!=null?R=window.setTimeout(m,o):(t.currentSrc.endsWith(".svg")||t.currentSrc.startsWith("data:image/svg+xml"))&&(d.value=1,g.value=1)};m()}const I=S(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),F=()=>{var t;if(!u.value.src||s.value==="idle")return null;const o=a("img",{class:["v-img__img",I.value],src:u.value.src,srcset:u.value.srcset,alt:"",sizes:e.sizes,ref:i,onLoad:b,onError:N},null),m=(t=n.sources)==null?void 0:t.call(n);return a(z,{transition:e.transition,appear:!0},{default:()=>[H(m?a("picture",{class:"v-img__picture"},[m,o]):o,[[K,s.value==="loaded"]])]})},P=()=>a(z,{transition:e.transition},{default:()=>[u.value.lazySrc&&s.value!=="loaded"&&a("img",{class:["v-img__img","v-img__img--preload",I.value],src:u.value.lazySrc,alt:""},null)]}),k=()=>n.placeholder?a(z,{transition:e.transition,appear:!0},{default:()=>[(s.value==="loading"||s.value==="error"&&!n.error)&&a("div",{class:"v-img__placeholder"},[n.placeholder()])]}):null,A=()=>n.error?a(z,{transition:e.transition,appear:!0},{default:()=>[s.value==="error"&&a("div",{class:"v-img__error"},[n.error()])]}):null,D=()=>e.gradient?a("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,W=_(!1);{const t=w(c,o=>{o&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{W.value=!0})}),t())})}return B(()=>H(a(p,{class:["v-img",{"v-img--booting":!W.value}],style:{width:h(e.width==="auto"?d.value:e.width)},aspectRatio:c.value,"aria-label":e.alt,role:e.alt?"img":void 0},{additional:()=>a(J,null,[a(F,null,null),a(P,null,null),a(D,null,null),a(k,null,null),a(A,null,null)]),default:n.default}),[[G("intersect"),{handler:f,options:e.options},null,{once:!0}]])),{currentSrc:v,image:i,state:s,naturalWidth:d,naturalHeight:g}}});export{z as M,ie as V,Y as a,re as b,Q as m,B as u};
